package com.flexfit.ttsservice.config;

import com.google.auth.oauth2.GoogleCredentials;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.util.Base64;

@Configuration
public class GoogleCredentialsConfig {

    @Bean
    public GoogleCredentials googleCredentials() throws IOException {
        // Embedded base64 encoded Google Cloud credentials
        String credentialsBase64 = "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiZXNzZW50aWFsLWdyYXBoLTQ2NjQxNS1rOCIsCiAgInByaXZhdGVfa2V5X2lkIjogIjNmZjU1ZjQ4YzBjY2I2YWM5YjAwOWZmY2JkOTAxY2EwOTJkZDM1YzkiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRQzJPd1dPMk1GU0xSblJcbktHWnRidEpIcFlqdERSUU5rSHRtL2ZoRTRvd1VEcXFLL2kyUDlDNit2UjVnNENDMHZ2b2hYMEJrQmRjdW15VHNcbkhOMjFMYkRhd3VWQjdwMzFybVdvQVl5UnhmeHVOcDB4VTRFa1Q3emZnU0F3Uzg5SXBPTEdGOUlsSFpIZ0pZOExcbmphRmIwWmRRc1YxWStaVzdmL3VvcnVydm9pTmFCNHlxWDBsNzJ1OWlUcE0xS0N6b2wrUTNDVEorT090dFdFSm9cbm9JNUUzR2w3bGx1ekhNRjA1VXl6Rm9Yb21hN0pxNm0wZzcrWlBwNWZaZk9GTzVXMkFuRnpvdlVpUHU3TW1ScXJcbmhDQ2FPMDZUQ0xlZUZpUG1oQnUrOWxaeWtUNmsxdlRqZ2xxZExlUk14S1NjbUZ4WGQ3bzgzdTQvLy9ZdTArU2xcbkVnc3BRYzJWQWdNQkFBRUNnZ0VBRmRPNXBZa0ZRREczd0d1UzRva0l5eko0S3FYMk5oa05ZWXpmc21jM283cTNcbi9HQlg2OEN4NHFzbUJZWXRxZ2lmK1k3K1dFZGMwQVVlNWVCMVFURExyZ0JKMDkwS3lEVWtrYWJuTHBvUGZpZGJcbmY3VFgvZXRHY21KTE4rTUtCOUpSZVZjUmJER3FXZUNWelgvMWlRUEY3ZWFPQ2FJU0tHY1FLU2hwRlRLUFY4YVFcbnRxUmxvMWFrbG1CZk5lcDBMNHVvbkkwbVFEakFSeU83SHBMd2lKSFJOeTE2eE5rKzRpVWxBR3BzTTc1dy9EUm9cbmd3KzA0bTJ5ZjRUSGN6enJwOEVIaHMvenBpTVQ3VzJaRElFdVVjNkJRWGpVdkdyTjc4bXVXNUxBK3pKQ2NBb3RcbkdMQ2lsa1lqdE02Y2JqbjZkRjJNYnJIbnVYYXZLZUpvU3hlV3pmc3ZWd0tCZ1FEdTFqYW5KNVRJRjlTVXM3ZDFcbkhmN3JycEppT2YxQnY1SFQ0VXkwQyt2cDJVUExtMllnVVpXVWVqMDI2RERQT1BMNVpMUzBSQXRTeXVka2tRRWVcbkZtYlByMVg2V21sOXJkSkhNcGUvWU1xSkk4NS81YWY5bTBOTmhLZWcvUkQ0NEtlTTdvNFhzaVlMT2lKdkt0YVFcbkpkdjNaVGNNV0ZGcU9xUXl6cmI1SXcxdkV3S0JnUUREVTNJZ21JV3Bvcm55L3JtMHdNZnFsYUxuL0Rib0tXM2tcblpUUFM0OHRCenBrWUJUQndiS09RN1luN0txZHVxRUtRMjdyQzRzeTR0YWhHbTl2dG1RSkNOb0QxajB4eWJLem5cbjFIS0RqZlNJZm5XN3huZnV2SE9ZSWRnK1RvRmdnUVdzcEhXMDBhclZVWllqMUFhZW84TUMwR2VtWmNUU2RDTkdcblJ1bzl1NnpkdHdLQmdRQ0JGYnd5T2QxYkRDNDBOTEg2RmIwNjZuNXBvb2Z6NmpOSi9pSXp5YUczSVZ0WUIyUjZcbklUNGtJckZGSk5lRW1IWVNQdERBQVdyUlU2TWVvcFNsQzF5RDhYTVp2Wlg0ZkdNRFloL01LdWNzbWZLNUE0bjVcbk10cDhZaThyZnJ1V2wrMVc2WFJZOEV0SmxDRWFUbC9yUnRzTmFtSUhSUkN6eG9BS2lka3c3RFlOaXdLQmdCbDdcbmUzb3hLODd6d2RxbnpNWitHQmJNcXRJbEgyeXVhdjNQRGpISE1pOUZxc2R0ZGVKVTZnbndVMzRIRkl6bE9ybjNcblVLZzRPb2ttZWV1c1RjYnpuVTNTR29UdXl3UnFsU3d4bFRjQWdCU0dtd21DWFFjeVlzcElNQlFBM2ZRZklRUmlcbitGQTh3bExPTUE1QWpSU0pQTm5USXBLYzJFNjBoQjJaQnRwQzc4eUZBb0dCQU11TW1VS3VsWmxkMFdZbkkranhcbk0rckVzaHpuOEtZV1h5enZpV2tram52RnY2ZVVtVWM4SkcweHAvV2Y2RmxwQ3ZUV1FoRUwzK0xYbEVtZmNXN1NcbmJySUVIOVJuQkdWclliUUpsUHdWYVdzR29UME9SOGpSOGtya1lUUFN5b0E2QkRoVDJ0UWRRZXVNeEl4TjljUEpcbmQ2RkVjeDYwN3FFZncwYjEyb1QrLzcyelxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogIm5ld3R0c0Blc3NlbnRpYWwtZ3JhcGgtNDY2NDE1LWs4LmlhbS5nc2VydmljZWFjY291bnQuY29tIiwKICAiY2xpZW50X2lkIjogIjEwODkwNzA0NjQwMTk2NzUxMzU1MyIsCiAgImF1dGhfdXJpIjogImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoIiwKICAidG9rZW5fdXJpIjogImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuIiwKICAiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsCiAgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvbmV3dHRzJTQwZXNzZW50aWFsLWdyYXBoLTQ2NjQxNS1rOC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsCiAgInVuaXZlcnNlX2RvbWFpbiI6ICJnb29nbGVhcGlzLmNvbSIKfQ==";
        
        try {
            // Decode base64 string
            byte[] decodedBytes = Base64.getDecoder().decode(credentialsBase64);
            return GoogleCredentials.fromStream(new ByteArrayInputStream(decodedBytes));
        } catch (Exception e) {
            throw new RuntimeException("Failed to load Google Cloud credentials", e);
        }
    }
} 